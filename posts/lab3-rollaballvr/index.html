<!DOCTYPE html>
<html lang='en'><head>
  <title>Lab 3: Adapt Roll A Ball to Virtual Reality | Soline Hayes</title>
  <meta charset='utf-8'>
  <meta name="generator" content="Hugo 0.78.2" />
  <meta name = 'viewport' content = 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
  <meta http-equiv = 'X-UA-Compatible' content = 'IE=edge'>
<meta property = 'og:locale' content = 'en_US' />
<meta property="og:type" content="article">
<meta property = 'og:title' content = 'Lab 3: Adapt Roll A Ball to Virtual Reality' />
<meta name="description" content="In this article we will adapt a simple roll a ball game to virtual reality. In the last article we created a roll a ball game with a few enhancement. This one …">
<meta property = 'og:description' content = 'In this article we will adapt a simple roll a ball game to virtual reality. In the last article we created a roll a ball game with a few enhancement. This one …'>
<meta property = 'og:url' content = 'https://solinehayes.github.io/posts/lab3-rollaballvr/' />
<meta property = 'og:image' content = 'https://solinehayes.github.io/images/VRRollABall/cover.png'/>
<meta name = 'twitter:card' content = 'summary_large_image' />
<meta name = 'twitter:creator' content = ''>
<meta name = 'twitter:title' content = 'Lab 3: Adapt Roll A Ball to Virtual Reality' />
<meta property = 'twitter:description'  content = 'In this article we will adapt a simple roll a ball game to virtual reality. In the last article we created a roll a ball game with a few enhancement. This one …'/>
<meta name = 'twitter:image' content = 'https://solinehayes.github.io/images/VRRollABall/cover.png' />
<link rel='apple-touch-icon' sizes='180x180' href='https://solinehayes.github.io/images/icons/apple-touch-icon.png'>
<link rel='icon' type='image/png' sizes='32x32' href='https://solinehayes.github.io/images/icons/favicon-32x32.png'>
<link rel='icon' type='image/png' sizes='16x16' href='https://solinehayes.github.io/images/icons/favicon-16x16.png'>
<link rel='manifest' href='https://solinehayes.github.io/images/icons/site.webmanifest'>

  <link rel='canonical' href='https://solinehayes.github.io/posts/lab3-rollaballvr/'>
  <link rel = 'stylesheet' href = 'https://solinehayes.github.io/css/styles.f29b59fde26c20ac66c7eece23f32198e5cccb77ff4cc5d05c00244aa1ac1441c2c2db7c47058e070a69f91e3caaba643c1f7bf3e4fb011e466dfb818117e295.css' integrity = 'sha512-8ptZ/eJsIKxmx&#43;7OI/MhmOXMy3f/TMXQXAAkSqGsFEHCwtt8RwWOBwpp&#43;R48qrpkPB978&#43;T7AR5GbfuBgRfilQ=='>
</head>

  <body><div class = 'nav-drop'>
  <div class = 'nav-body'>
    
      <a href = 'https://solinehayes.github.io/about/' class = 'nav_item'>About</a>
      <a href = 'https://solinehayes.github.io/posts/lab1-blog/' class = 'nav_item'>Blog Setup</a>
      <a href = 'https://solinehayes.github.io/posts/lecture1-hyperreality/' class = 'nav_item'>Hyper Reality</a>
      <a href = 'https://solinehayes.github.io/posts/lecture3-locomotioninvr/' class = 'nav_item'>Locomotion in VR</a>
      <a href = 'https://solinehayes.github.io/posts/project-boatkartlocomotion/' class = 'nav_item'>Project</a>
      <a href = 'https://solinehayes.github.io/posts/lab2-rollaball/' class = 'nav_item'>Roll A Ball</a>
      <a href = 'https://solinehayes.github.io/posts/lecture2-ultimatedisplay/' class = 'nav_item'>Ultimate Display</a>
      <a href = 'https://solinehayes.github.io/posts/lab1-unity/' class = 'nav_item'>Unity Setup</a>
      <a href = 'https://solinehayes.github.io/posts/lab3-rollaballvr' class = 'nav_item'>VR Roll A Ball</a>
    <div class = 'nav-close'></div>
  </div>
</div><header class = 'nav' >
  <nav class = 'nav-menu'>
    <a href='https://solinehayes.github.io' class = 'nav-brand nav_item'>Soline Hayes</a>
    <div class = 'nav_bar-wrap'>
      <div class = 'nav_bar'></div>
    </div>
  </nav>
</header>


    <main>

<section class = 'post_header' style = 'background-image:url(https://solinehayes.github.io/images/VRRollABall/cover.png);'>
  <h1 class='post_title'>Lab 3: Adapt Roll A Ball to Virtual Reality</h1>
</section>
<div class = 'post'>
  <article class='post_content'><p>In this article we will adapt a simple roll a ball game to virtual reality. In the last article we created a roll a ball game with a few enhancement. This one will be a little hard to adapt so we will just go from a simple Roll A Ball as described in this <a href="https://learn.unity.com/project/roll-a-ball">tutorial</a>.</p>
<h1 id="adapt-a-projet-for-virtual-reality">Adapt a projet for virtual reality</h1>
<p>We are here dealing with a Oculus Quest, some things will defer if you want to use an Oculus Rift.</p>
<ol>
<li>After you&rsquo;ve created your new project, go to File &gt; Build settings. Click on Android and switch plateform

<picture class = 'nav_logo'>
  <source srcset = 'https://solinehayes.github.io/images/VRRollABall/BuildSettings.png' media="(prefers-color-scheme: dark)">
  <img srcset = 'https://solinehayes.github.io/images/VRRollABall/BuildSettings.png' alt = 'Build Settings'>
</picture>
</li>
<li>Click on Player settings at the bottom left</li>
<li>In other settings &gt; Graphic API remove Vulkan

<picture class = 'nav_logo'>
  <source srcset = 'https://solinehayes.github.io/images/VRRollABall/PlayerOtherSettings.png' media="(prefers-color-scheme: dark)">
  <img srcset = 'https://solinehayes.github.io/images/VRRollABall/PlayerOtherSettings.png' alt = 'Other Settings'>
</picture>
</li>
<li>Below in the XR settings, tick the Virtual Reality Supported checkbox</li>
<li>Click on the &lsquo;+&rsquo; and add Oculus

<picture class = 'nav_logo'>
  <source srcset = 'https://solinehayes.github.io/images/unity-RollABall/XRSettings.png' media="(prefers-color-scheme: dark)">
  <img srcset = 'https://solinehayes.github.io/images/VRRollABall/XRSettings.png' alt = 'XR Settings'>
</picture>
</li>
<li>Open an internet page and go to the Unity asset store.</li>
<li>Search the Oculus Integration asset and add it to your assets</li>
<li>In Unity, go to window &gt; Package Manager, and My Assets. Import the Oculus Integration onto your project</li>
</ol>
<p>Now everything is setup you can create a basic VR scene!</p>
<ol>
<li>Delete the main camera, you won&rsquo;t need it anymore since the headset will be your camera.</li>
<li>In the newly created folder Oculus, select VR&gt;Prefab&gt;OVRCameraRig and add it to your scene by dragging it onto the Hierarchy.</li>
<li>In the inspector, in the OVRManager, go to tracking and select it to &ldquo;Floor level&rdquo;</li>
<li>Add the OVRControllerPrefabs under their hand anchors and rename them to differentiate the left from the right one.</li>
</ol>
<p>Now you have the most basic VR-ready unity project. A good hack not to have to do this all over again is to create a GitHub repository with those basics settings and scene and be able to use it as a basic template.</p>
<p><a href="https://github.com/solinehayes/Empty-VR-Project">Here is the repository</a> I created with the empty VR scene.</p>
<h1 id="add-roll-a-ball">Add Roll a Ball</h1>
<p>The idea of the adaptation is be in a VR enviroment with a table and the Roll A Ball game on it. The aim is to be able to grab it and make the ball move and catch the gems by simply rotating the controller.
The first step is to create a unity package with the before hand created Roll A Ball. Select Asset in the project window, in the Asset tab, select export package and save it to you computer.
In order to import it to your new VR project you go to Assets &gt; Import Package &gt; Custom Package and select the package. In order to fix the errors received upon the import you can rename the PlayerController of you newly imported package and comment the InputSystem import in the beginning of the file.</p>
<p>The idea is that you pick the Roll a Ball board by clicking on the back trigger button on the Oculus controller when you collide with the board. You can get the trigger value with:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#">triggerValue = OVRInput.Get(OVRInput.Axis1D.PrimaryIndexTrigger,controller);
</code></pre></div><p>In order to know when the controllers collide with the board we use colliders with the OnTrigger option on. Thanks to this option we can change the boolean isColliding to true in the OnTriggerEnter function called automatically.</p>
<p>We just have to be careful about the colliders so that the ones of the game don&rsquo;t affect those of the controllers. In order to prevent yourself from those problems you can create 2 different layer: one for Roll A Ball and the other one for selection and define how theu affect each other in the Layer collision matrix in the project settings.</p>

<picture class = 'nav_logo'>
  <source srcset = 'https://solinehayes.github.io/images/unity-RollABall/LayerCollisionMatrix.png' media="(prefers-color-scheme: dark)">
  <img srcset = 'https://solinehayes.github.io/images/VRRollABall/LayerCollisionMatrix.png' alt = 'Layer Collision Matrix'>
</picture>

<p>When the collider is colliding with the board and the trigger value is higher than a certain threshold you have to link the board to the controller.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#">isSelected = <span style="color:#66d9ef">true</span>;
selectedObj.transform.parent = <span style="color:#66d9ef">this</span>.transform; <span style="color:#75715e">// The board will move with the controller
</span><span style="color:#75715e"></span>Rigidbody rb = selectedObj.GetComponent&lt;Rigidbody&gt;();
rb.isKinematic = <span style="color:#66d9ef">true</span>; <span style="color:#75715e">// The physics of this object is defined by a script now not by physics laws like gravity
</span><span style="color:#75715e"></span>rb.useGravity = <span style="color:#66d9ef">false</span>;
rb.velocity = Vector3.zero;
rb.angularVelocity = Vector3.zero;
</code></pre></div><p>Then when the board is released we want to reset the normal physics to the board</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c#" data-lang="c#">isSelected = <span style="color:#66d9ef">false</span>;
selectedObj.transform.parent = <span style="color:#66d9ef">null</span>;<span style="color:#75715e">//The board movement is no longer linked with the controller
</span><span style="color:#75715e"></span>Rigidbody rb = selectedObj.GetComponent&lt;Rigidbody&gt;();
rb.useGravity = <span style="color:#66d9ef">true</span>;<span style="color:#75715e">//The board will be subject to physics laws
</span><span style="color:#75715e"></span>rb.isKinematic = <span style="color:#66d9ef">false</span>;
rb.velocity = OVRInput.GetLocalControllerVelocity(controller); <span style="color:#75715e">// The board is thrown with the hand controller velocity
</span><span style="color:#75715e"></span>rb.angularVelocity = OVRInput.GetLocalControllerAngularVelocity(controller);
</code></pre></div><p>You can now pick up the board and play the roll a ball game. You can also experiment and add some features like holes for the ball not to fall in for instance to make your game a little more challenging.</p>

<picture class = 'nav_logo'>
  <source srcset = 'https://solinehayes.github.io/images/VRRollABall/cover.png' media="(prefers-color-scheme: dark)">
  <img srcset = 'https://solinehayes.github.io/images/VRRollABall/cover.png' alt = 'VR Roll a ball game'>
</picture>

<p>You can find the full repository of the <a href="https://github.com/solinehayes/VR-RollABall">VR roll a ball</a> in my github.</p>
<h1 id="debuging-with-oculus-and-linux">Debuging with Oculus and Linux</h1>
<p>I am a Linux user and the big issue with Oculus and Linux is that the Oculus link allowing you to run directly the game by clicking play in unity. It is quite okay to have to use Build and run to try your game. However by doing this you have no console it gets way harder to debug.
The following video is a great help for all linux or mac user to debug properly your VR applications:

<div class = 'video'>
  <iframe src='https://www.youtube.com/embed/AtOX6bXcQJE?controls=1&rel=0'></iframe>
</div>
</p>

    
    <div class = 'post_extra'><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>

    
  </article>
  
  <aside><h3>More from Soline Hayes</h3>
<ul class='posts aside'>
<li class = 'post_item'>
  <a class = 'post_card' href='https://solinehayes.github.io/posts/project-boatkartlocomotion/' title = 'Project: Kart Boat Locomotion' style = 'background-image: url(https://solinehayes.github.io/images/projectAssets/project-image.jpg);'>
  </a>
  <div class = 'excerpt'>
    <div class = 'excerpt_meta'><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>
    <h3 class = 'post_link'>
      <a href='https://solinehayes.github.io/posts/project-boatkartlocomotion/'>Project: Kart Boat Locomotion</a>
    </h3>
    <p class = 'pale'>Virtual Reality Project: Kart Boat locomotion Idea of the project The idea of this project …</p>
  </div>
</li>

<li class = 'post_item'>
  <a class = 'post_card' href='https://solinehayes.github.io/posts/lecture3-locomotioninvr/' title = 'Lecture 3:  Locomotion in Virtual Reality' style = 'background-image: url(https://solinehayes.github.io/images/Locomotion/environment.png);'>
  </a>
  <div class = 'excerpt'>
    <div class = 'excerpt_meta'><div class = 'copy' data-share = 'Copy' data-copied = 'Copied'><svg>
  <use xlink:href="#copy"></use>
</svg>
</div>

    </div>
    <h3 class = 'post_link'>
      <a href='https://solinehayes.github.io/posts/lecture3-locomotioninvr/'>Lecture 3:  Locomotion in Virtual Reality</a>
    </h3>
    <p class = 'pale'>Locomotion in Virtual Reality Locomotion is VR is a very important and not yet solved …</p>
  </div>
</li>

</ul>

  </aside>
  
</div>
<script src = 'https://solinehayes.github.io/js/autosize.min.js'></script>
<script src = 'https://solinehayes.github.io/js/timeago.js'></script>
    </main><svg width="0" height="0" class="hidden">
  <symbol viewBox="0 0 699.428 699.428" xmlns="http://www.w3.org/2000/svg" id="copy">
    <path d="M502.714 0H240.428C194.178 0 153 42.425 153 87.429l-25.267.59c-46.228 0-84.019 41.834-84.019 86.838V612c0 45.004 41.179 87.428 87.429 87.428H459c46.249 0 87.428-42.424 87.428-87.428h21.857c46.25 0 87.429-42.424 87.429-87.428v-349.19zM459 655.715H131.143c-22.95 0-43.714-21.441-43.714-43.715V174.857c0-22.272 18.688-42.993 41.638-42.993l23.933-.721v393.429C153 569.576 194.178 612 240.428 612h262.286c0 22.273-20.765 43.715-43.714 43.715zm153-131.143c0 22.271-20.765 43.713-43.715 43.713H240.428c-22.95 0-43.714-21.441-43.714-43.713V87.429c0-22.272 20.764-43.714 43.714-43.714H459c-.351 50.337 0 87.975 0 87.975 0 45.419 40.872 86.882 87.428 86.882H612zm-65.572-349.715c-23.277 0-43.714-42.293-43.714-64.981V44.348L612 174.857zm-43.714 131.537H306c-12.065 0-21.857 9.77-21.857 21.835s9.792 21.835 21.857 21.835h196.714c12.065 0 21.857-9.771 21.857-21.835 0-12.065-9.792-21.835-21.857-21.835zm0 109.176H306c-12.065 0-21.857 9.77-21.857 21.834 0 12.066 9.792 21.836 21.857 21.836h196.714c12.065 0 21.857-9.77 21.857-21.836 0-12.064-9.792-21.834-21.857-21.834z"
    ></path>
  </symbol>
  <symbol viewBox="0 0 60.015 60.015" xmlns="http://www.w3.org/2000/svg" id="reply">
    <path d="M42.007 0h-24c-9.925 0-18 8.075-18 18v14c0 9.59 7.538 17.452 17 17.973v8.344a1.694 1.694 0 0 0 1.699 1.698c.44 0 .873-.173 1.198-.498l1.876-1.876C26.708 52.713 33.259 50 40.227 50h1.78c9.925 0 18-8.075 18-18V18c0-9.925-8.075-18-18-18zm16 32c0 8.822-7.178 16-16 16h-1.78c-7.502 0-14.556 2.921-19.86 8.226l-1.359 1.359V44a1 1 0 1 0-2 0v3.949c-8.356-.52-15-7.465-15-15.949V18c0-8.822 7.178-16 16-16h24c8.822 0 16 7.178 16 16v14z"></path>
  </symbol>
</svg>
<footer class = 'footer'>
  <div class = 'footer_inner wrap pale'>
    <p>&copy;&nbsp;<span class = 'year'></span>&nbsp;Soline Hayes.
    Designed by  <a href = 'https://www.linkedin.com/in/soline-hayes-827646151/' title = 'Linkedin Profile'>Soline</a></p>
  </div>
</footer>
<script src = 'https://solinehayes.github.io/js/index.min.e4c79ed3ecfc1d5121c425f0353cb0f9315837d6b4d68fd6536503cf71658097560e7fa2219a1d8ae4655d49aa75ba15f0ac34e81717dc78c50b2d8cd4ebd9ee.js'></script>

  </body>
</html>
